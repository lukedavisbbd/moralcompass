<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moral Compass</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/dist/index.js" defer type="module"></script>
    <script src="https://accounts.google.com/gsi/client" defer async></script>
</head>
<body>
    <template class="page-template" data-page="main">{{> main }}</template>
    <template class="page-template" data-page="homepage">{{> homepage }}</template>
    <template class="page-template" data-page="quiz" data-onmount="SPA.handlers.initQuiz()">{{> quiz }}</template>
    <template class="page-template" data-page="error">{{> error }}</template>
    <div id="app-root" style="display: contents"></div>
</body>
<script>
  function handleCredentialResponse(response) {
    fetch('/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ token: response.credential })
    })
    .then(res => res.json())
    .then((data) => {
        alert(`Hello ${data.user.name}`);
        localStorage.setItem("user", data.user);
        localStorage.setItem("jwt", data.jwt);
    })
    .catch(error => alert(error));
  }
</script>
</html>
